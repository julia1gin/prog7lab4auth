# Аутентификация и регистрация пользователей

## Гиниятуллина Юлия Сергеевна, ИВТ 2.2

---

## Описание проекта

Приложение для создания и прохождения опросов с системой аутентификации пользователей. 
Применение форм в Django. Аутентификация и регистрация пользователей.

---

## Функциональность приложения

### 1. Просмотр опросов

**Главная страница** (`/polls/`)
- Список последних 5 опубликованных опросов
- Кнопки для голосования и просмотра результатов

### 2. Голосование

**Страница опроса** (`/polls/<id>/`)
- Отображение вопроса и вариантов ответов
- Форма для выбора одного варианта (radio button)

**Обработка голоса** (`/polls/<id>/vote/`)
- POST запрос с выбранным вариантом
- Увеличение счетчика голосов
- Редирект на страницу результатов

### 3. Просмотр результатов

**Страница результатов** (`/polls/<id>/results/`)
- Отображение всех вариантов с количеством голосов
- Кнопка "Vote Again" для повторного голосования

### 4. Создание опросов

**Форма создания** (`/polls/new/`)
- **Только для администраторов (staff)**
- Поле для ввода вопроса (до 200 символов)
- Текстовая область для вариантов ответа (каждый на новой строке)
- Валидация: минимум 2 варианта ответа
- Автоматическое создание связанных объектов Choice

### 5. Редактирование опросов

**Форма редактирования** (`/polls/<id>/edit/`)
- **Только для администраторов (staff)**
- Заполнение формы текущими данными
- Удаление старых вариантов и создание новых
- Обновление времени публикации

### 6. Аутентификация

#### Регистрация (`/polls/register`)
- Форма с полями: username, email, password, password confirmation
- Валидация пароля (минимум 8 символов, не только числа)
- Создание пользователя с статусом `is_active=False`
- Отправка письма с ссылкой активации

#### Активация аккаунта
- Письмо отправляется на указанный email
- Ссылка содержит закодированный ID пользователя и токен
- Токен действует 24 часа
- Успешная активация переводит пользователя в статус `is_active=True`

#### Вход (`/polls/login`)
- Форма с полями: username, password
- Проверка учетных данных
- Создание сессии пользователя
- Редирект на страницу, откуда пришел пользователь (если указан параметр `next`)
- Вывод сообщения об успешном входе

#### Выход (`/polls/logout`)
- Удаление сессии пользователя
- Редирект на главную страницу
- Вывод сообщения об успешном выходе

---

## Дополнительные функции

### Слоганы
- На каждой странице выводится случайный "страшный" слоган
- 15 различных вариантов

### Email верификация
- Отправка на email из `settings.EMAIL_HOST_USER`
- Использование `gmail.com` SMTP сервера
- Кодирование ID пользователя в base64
- Создание токена через `default_token_generator`

---

# Скриншоты рализованной авторизации в Polls

## 1. Сообщение об отправке письма активации

![Сообщение об отправке письма активации](/images/img.png)

После успешной регистрации система выводит сообщение с инструкцией проверить почту и активировать аккаунт. Письмо отправляется на указанный email адрес.

---

## 2. Письмо активации на Gmail

![Письмо активации на Gmail](/images/img_1.png)

Пользователь получает письмо с кнопкой "Activate Account". Ссылка активации содержит закодированный ID пользователя и токен для безопасности.

---

## 3. Страница успешной активации аккаунта

![Успешная активация аккаунта](/images/img_2.png)

После клика по ссылке активации в письме аккаунт становится активным. Система показывает сообщение "Account Activated!" с кнопкой для входа.

---

## 4. Вход в систему после активации

![Вход в систему после активации](/images/img_3.png)

После успешного входа пользователь видит главную страницу со своим профилем (username, email) и может начать голосовать в опросах.

---
